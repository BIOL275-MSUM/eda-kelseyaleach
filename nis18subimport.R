
#STEP 1
library(Hmisc) #TO USE contents()

#---USE SLASH(/) TO SEPERATE A FILE PATH---#
PUF <- "/Users/kelseyleach/eda-kelseyaleach/data"

flatfile <- "/Users/kelseyleach/eda-kelseyaleach/data/NISPUF18.DAT"

#STEP 2
UTDlevels=c(0,1)
UTDlabels=c("NOT UTD", "UTD")

INCQ298Alevels=c(10,11,12,13,14,3,4,5,6,7,77,8,9,99)
INCQ298Alabels=c("$35001 - $40000", "$40001 - $50000", "$50001 - $60000", "$60001 - $75000", "$75001+", "$0 - $7500", "$7501 - $10000", "$10001 - $17500", "$17501 - $20000", "$20001 - $25000", "DON'T KNOW", "$25001 - $30000", "$30001 - $35000", "REFUSED")

#STEP 3
LIST.NAMEWIDTH <-
  c("SEQNUMC",6,
    "SEQNUMHH",5,
    "PDAT",1,
    "PROVWT_C",20,
    "RDDWT_C",19,
    "STRATUM",4,
    "YEAR",4,
    "AGECPOXR",1,
    "HAD_CPOX",2,
    "AGEGRP",1,
    "BF_ENDR06",8,
    "BF_EXCLR06",8,
    "BF_FORMR08",8,
    "BFENDFL06",1,
    "BFFORMFL06",1,
    "C1R",1,
    "C5R",2,
    "CBF_01",2,
    "CEN_REG",1,
    "CHILDNM",1,
    "CWIC_01",2,
    "CWIC_02",2,
    "EDUC1",1,
    "FRSTBRN",1,
    "I_HISP_K",1,
    "INCPORAR",16,
    "INCPORAR_I",16,
    "INCPOV1",1,
    "INCQ298A",2,
    "LANGUAGE",1,
    "M_AGEGRP2",1,
    "MARITAL2",1,
    "MOBIL_I",1,
    "NUM_PHONE",2,
    "NUM_CELLS_HH",2,
    "NUM_CELLS_PARENTS",2,
    "RACE_K",1,
    "RACEETHK",1,
    "RENT_OWN",2,
    "SEX",1,
    "ESTIAP18",3,
    "EST_GRANT",2,
    "STATE",2,
    "D6R",1,
    "D7",1,
    "N_PRVR",1,
    "PROV_FAC",1,
    "REGISTRY",1,
    "VFC_ORDER",1,
    "HEP_BRTH",1,
    "HEP_FLAG",1,
    "P_NUHEPX",1,
    "P_NUHIBX",1,
    "P_NUHPHB",1,
    "P_NUMDAH",1,
    "P_NUMDHI",1,
    "P_NUMDIH",1,
    "P_NUMDTA",1,
    "P_NUMDTP",1,
    "P_NUMFLU",1,
    "P_NUMFLUL",1,
    "P_NUMFLUM",1,
    "P_NUMFLUN",1,
    "P_NUMHEA",1,
    "P_NUMHEN",1,
    "P_NUMHEP",1,
    "P_NUMHG",1,
    "P_NUMHHY",1,
    "P_NUMHIB",1,
    "P_NUMHIN",1,
    "P_NUMHION",1,
    "P_NUMHM",1,
    "P_NUMHS",1,
    "P_NUMIPV",1,
    "P_NUMMCN",1,
    "P_NUMMMR",1,
    "P_NUMMMRX",1,
    "P_NUMMMX",1,
    "P_NUMMP",1,
    "P_NUMMPR",1,
    "P_NUMMRV",1,
    "P_NUMMS",1,
    "P_NUMMSM",1,
    "P_NUMMSR",1,
    "P_NUMOLN",1,
    "P_NUMOPV",1,
    "P_NUMPCV",1,
    "P_NUMPCP",1,
    "P_NUMPCC",1,
    "P_NUMPCC7",1,
    "P_NUMPCC13",1,
    "P_NUMPCCN",1,
    "P_NUMPCN",1,
    "P_NUMPOL",1,
    "P_NUMRB",1,
    "P_NUMRG",1,
    "P_NUMRM",1,
    "P_NUMRO",1,
    "P_NUMROT",1,
    "P_NUMTPN",1,
    "P_NUMVRC",1,
    "P_NUMVRN",1,
    "P_NUMVRX",1,
    "P_U12VRC",1,
    "P_UTD331",1,
    "P_UTD431",1,
    "P_UTDHEP",1,
    "P_UTDHEPA1",1,
    "P_UTDHEPA2",1,
    "P_UTDHIB",1,
    "P_UTDHIB_ROUT_S",1,
    "P_UTDHIB_SHORT_S",1,
    "P_UTDMCV",1,
    "P_UTDMMX",1,
    "P_UTDPC3",1,
    "P_UTDPCV",1,
    "P_UTDPCVB13",1,
    "P_UTDPOL",1,
    "P_UTDROT_S",1,
    "P_UTDTP3",1,
    "P_UTDTP4",1,
    "PU431331",1,
    "P_UTD431H31_ROUT_S",1,
    "PU431_31",1,
    "PU4313313",1,
    "P_UTD431H313_ROUT_S",1,
    "PU4313314",1,
    "P_UTD431H314_ROUT_S",1,
    "PU431_314",1,
    "PUT43133",1,
    "P_UTD431H3_ROUT_S",1,
    "PUTD4313",1,
    "P_UTD431H_ROUT_S",1,
    "U24_FLU_24D",1,
    "U1D_HEP",1,
    "U2D_HEP",1,
    "U3D_HEP",1,
    "DDTP1",4,
    "DDTP2",4,
    "DDTP3",4,
    "DDTP4",4,
    "DDTP5",4,
    "DDTP6",4,
    "DDTP7",4,
    "DDTP8",1,
    "DDTP9",1,
    "DFLU1",4,
    "DFLU2",4,
    "DFLU3",4,
    "DFLU4",4,
    "DFLU5",4,
    "DFLU6",4,
    "DFLU7",3,
    "DFLU8",3,
    "DFLU9",1,
    "DHEPA1",4,
    "DHEPA2",4,
    "DHEPA3",4,
    "DHEPA4",4,
    "DHEPA5",3,
    "DHEPA6",1,
    "DHEPA7",1,
    "DHEPA8",1,
    "DHEPA9",1,
    "DHEPB1",4,
    "DHEPB2",4,
    "DHEPB3",4,
    "DHEPB4",4,
    "DHEPB5",4,
    "DHEPB6",3,
    "DHEPB7",1,
    "DHEPB8",1,
    "DHEPB9",1,
    "DHIB1",4,
    "DHIB2",4,
    "DHIB3",4,
    "DHIB4",4,
    "DHIB5",4,
    "DHIB6",3,
    "DHIB7",1,
    "DHIB8",1,
    "DHIB9",1,
    "DMMR1",4,
    "DMMR2",4,
    "DMMR3",4,
    "DMMR4",1,
    "DMMR5",1,
    "DMMR6",1,
    "DMMR7",1,
    "DMMR8",1,
    "DMMR9",1,
    "DMP1",1,
    "DMP2",1,
    "DMP3",1,
    "DMP4",1,
    "DMP5",1,
    "DMP6",1,
    "DMP7",1,
    "DMP8",1,
    "DMP9",1,
    "DMPRB1",1,
    "DMPRB2",1,
    "DMPRB3",1,
    "DMPRB4",1,
    "DMPRB5",1,
    "DMPRB6",1,
    "DMPRB7",1,
    "DMPRB8",1,
    "DMPRB9",1,
    "DPCV1",4,
    "DPCV2",4,
    "DPCV3",4,
    "DPCV4",4,
    "DPCV5",4,
    "DPCV6",4,
    "DPCV7",1,
    "DPCV8",1,
    "DPCV9",1,
    "DPOLIO1",4,
    "DPOLIO2",4,
    "DPOLIO3",4,
    "DPOLIO4",4,
    "DPOLIO5",4,
    "DPOLIO6",4,
    "DPOLIO7",3,
    "DPOLIO8",1,
    "DPOLIO9",1,
    "DRB1",3,
    "DRB2",1,
    "DRB3",1,
    "DRB4",1,
    "DRB5",1,
    "DRB6",1,
    "DRB7",1,
    "DRB8",1,
    "DRB9",1,
    "DROT1",3,
    "DROT2",3,
    "DROT3",3,
    "DROT4",3,
    "DROT5",4,
    "DROT6",1,
    "DROT7",1,
    "DROT8",1,
    "DROT9",1,
    "DVRC1",4,
    "DVRC2",4,
    "DVRC3",1,
    "DVRC4",1,
    "DVRC5",1,
    "DVRC6",1,
    "DVRC7",1,
    "DVRC8",1,
    "DVRC9",1,
    "DTP1_AGE",2,
    "DTP2_AGE",2,
    "DTP3_AGE",2,
    "DTP4_AGE",2,
    "DTP5_AGE",2,
    "DTP6_AGE",2,
    "DTP7_AGE",2,
    "DTP8_AGE",1,
    "DTP9_AGE",1,
    "FLU1_AGE",2,
    "FLU2_AGE",2,
    "FLU3_AGE",2,
    "FLU4_AGE",2,
    "FLU5_AGE",2,
    "FLU6_AGE",2,
    "FLU7_AGE",2,
    "FLU8_AGE",2,
    "FLU9_AGE",1,
    "HEA1_AGE",2,
    "HEA2_AGE",2,
    "HEA3_AGE",2,
    "HEA4_AGE",2,
    "HEA5_AGE",2,
    "HEA6_AGE",1,
    "HEA7_AGE",1,
    "HEA8_AGE",1,
    "HEA9_AGE",1,
    "HEP1_AGE",2,
    "HEP2_AGE",2,
    "HEP3_AGE",2,
    "HEP4_AGE",2,
    "HEP5_AGE",2,
    "HEP6_AGE",2,
    "HEP7_AGE",1,
    "HEP8_AGE",1,
    "HEP9_AGE",1,
    "HIB1_AGE",2,
    "HIB2_AGE",2,
    "HIB3_AGE",2,
    "HIB4_AGE",2,
    "HIB5_AGE",2,
    "HIB6_AGE",2,
    "HIB7_AGE",1,
    "HIB8_AGE",1,
    "HIB9_AGE",1,
    "MMR1_AGE",2,
    "MMR2_AGE",2,
    "MMR3_AGE",2,
    "MMR4_AGE",1,
    "MMR5_AGE",1,
    "MMR6_AGE",1,
    "MMR7_AGE",1,
    "MMR8_AGE",1,
    "MMR9_AGE",1,
    "MP1_AGE",1,
    "MP2_AGE",1,
    "MP3_AGE",1,
    "MP4_AGE",1,
    "MP5_AGE",1,
    "MP6_AGE",1,
    "MP7_AGE",1,
    "MP8_AGE",1,
    "MP9_AGE",1,
    "MPR1_AGE",1,
    "MPR2_AGE",1,
    "MPR3_AGE",1,
    "MPR4_AGE",1,
    "MPR5_AGE",1,
    "MPR6_AGE",1,
    "MPR7_AGE",1,
    "MPR8_AGE",1,
    "MPR9_AGE",1,
    "PCV1_AGE",2,
    "PCV2_AGE",2,
    "PCV3_AGE",2,
    "PCV4_AGE",2,
    "PCV5_AGE",2,
    "PCV6_AGE",2,
    "PCV7_AGE",1,
    "PCV8_AGE",1,
    "PCV9_AGE",1,
    "POL1_AGE",2,
    "POL2_AGE",2,
    "POL3_AGE",2,
    "POL4_AGE",2,
    "POL5_AGE",2,
    "POL6_AGE",2,
    "POL7_AGE",2,
    "POL8_AGE",1,
    "POL9_AGE",1,
    "RB1_AGE",2,
    "RB2_AGE",1,
    "RB3_AGE",1,
    "RB4_AGE",1,
    "RB5_AGE",1,
    "RB6_AGE",1,
    "RB7_AGE",1,
    "RB8_AGE",1,
    "RB9_AGE",1,
    "ROT1_AGE",2,
    "ROT2_AGE",2,
    "ROT3_AGE",2,
    "ROT4_AGE",2,
    "ROT5_AGE",2,
    "ROT6_AGE",1,
    "ROT7_AGE",1,
    "ROT8_AGE",1,
    "ROT9_AGE",1,
    "VRC1_AGE",2,
    "VRC2_AGE",2,
    "VRC3_AGE",1,
    "VRC4_AGE",1,
    "VRC5_AGE",1,
    "VRC6_AGE",1,
    "VRC7_AGE",1,
    "VRC8_AGE",1,
    "VRC9_AGE",1,
    "XDTPTY1",2,
    "XDTPTY2",2,
    "XDTPTY3",2,
    "XDTPTY4",2,
    "XDTPTY5",2,
    "XDTPTY6",2,
    "XDTPTY7",2,
    "XDTPTY8",1,
    "XDTPTY9",1,
    "XFLUTY1",2,
    "XFLUTY2",2,
    "XFLUTY3",2,
    "XFLUTY4",2,
    "XFLUTY5",2,
    "XFLUTY6",2,
    "XFLUTY7",2,
    "XFLUTY8",2,
    "XFLUTY9",1,
    "XHEPTY1",2,
    "XHEPTY2",2,
    "XHEPTY3",2,
    "XHEPTY4",2,
    "XHEPTY5",2,
    "XHEPTY6",2,
    "XHEPTY7",1,
    "XHEPTY8",1,
    "XHEPTY9",1,
    "XHIBTY1",2,
    "XHIBTY2",2,
    "XHIBTY3",2,
    "XHIBTY4",2,
    "XHIBTY5",2,
    "XHIBTY6",2,
    "XHIBTY7",1,
    "XHIBTY8",1,
    "XHIBTY9",1,
    "XMMRTY1",2,
    "XMMRTY2",2,
    "XMMRTY3",2,
    "XMMRTY4",1,
    "XMMRTY5",1,
    "XMMRTY6",1,
    "XMMRTY7",1,
    "XMMRTY8",1,
    "XMMRTY9",1,
    "XPCVTY1",2,
    "XPCVTY2",2,
    "XPCVTY3",2,
    "XPCVTY4",2,
    "XPCVTY5",2,
    "XPCVTY6",2,
    "XPCVTY7",1,
    "XPCVTY8",1,
    "XPCVTY9",1,
    "XPOLTY1",2,
    "XPOLTY2",2,
    "XPOLTY3",2,
    "XPOLTY4",2,
    "XPOLTY5",2,
    "XPOLTY6",2,
    "XPOLTY7",2,
    "XPOLTY8",1,
    "XPOLTY9",1,
    "XROTTY1",2,
    "XROTTY2",2,
    "XROTTY3",2,
    "XROTTY4",2,
    "XROTTY5",2,
    "XROTTY6",1,
    "XROTTY7",1,
    "XROTTY8",1,
    "XROTTY9",1,
    "XVRCTY1",2,
    "XVRCTY2",2,
    "XVRCTY3",1,
    "XVRCTY4",1,
    "XVRCTY5",1,
    "XVRCTY6",1,
    "XVRCTY7",1,
    "XVRCTY8",1,
    "XVRCTY9",1,
    "INS_STAT2_I",1,
    "INS_BREAK_I",1
  )

NAMEWIDTH <- matrix(LIST.NAMEWIDTH, length(LIST.NAMEWIDTH)/2, 2, byrow=T, dimnames = list(NULL, c("VARIABLE","WIDTH")))
NA_STRING <- c(" ", ".", " .", "  .", "   .", "   .    ", " .              ", "    .              ", "     .              ", "     .             ")

NISPUF18 <- read.fwf(flatfile, widths= as.numeric(NAMEWIDTH[,2]), col.names = NAMEWIDTH[,1], na.strings= NA_STRING, as.is=TRUE)

#STEP 5
save(NISPUF18, file=paste(PUF, "/NISPUF18.RData", sep=""))
